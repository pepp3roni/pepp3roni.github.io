<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>pepp3roni</title>
    <link rel="stylesheet" href="./style.css" />
</head>
<body>
    <div class="container">
        <div class="profile">
            <h1 class="name">pepp3roni</h1>
            <p class="bio-text" id="bio-text"></p>
            <span class="memorial-line" id="memorial-line"></span>
        </div>

        <div class="buttons-container">
            <a href="#" class="btn discord-btn" id="discord-btn" target="_blank">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.317 4.3698a18.08 18.08 0 0 0-4.837-2.0406C15.312 2.496 15.152 2.674 15 2.865c-1.436-.369-2.954-.369-4.39 0-.154-.19-.315-.37-.482-.536a18.08 18.08 0 0 0-4.837 2.0406C1.572 8.528.716 12.569 1.085 16.52c1.804 1.518 3.824 2.663 5.964 3.464.403-.47.772-.97 1.09-1.487-.522-.272-1.02-.575-1.494-.914.118-.05.236-.107.354-.17 3.444 1.818 7.154 1.818 10.598 0 .118.063.236.12.354.17-.474.34-.972.642-1.494.914.318.517.687 1.017 1.09 1.487 2.14-.801 4.16-1.946 5.964-3.464-.46-4.587-1.52-8.603-4.178-12.1502zM8.678 14.484c-.865 0-1.579-.795-1.579-1.756s.713-1.757 1.579-1.757c.877 0 1.59.795 1.59 1.757s-.713 1.756-1.59 1.756zm7.245 0c-.865 0-1.579-.795-1.579-1.756s.713-1.757 1.579-1.757c.877 0 1.591.795 1.591 1.757s-.714 1.756-1.591 1.756z"/>
                </svg>
            </a>
            <a href="https://t.me/pepp3roni" class="btn contact-btn" target="_blank" id="contact-btn">
                <span id="contact-btn-text"></span>
            </a>
        </div>
    </div>

    <div class="lang-switcher">
        <button class="lang-btn" id="lang-ru">RU</button>
        <button class="lang-btn" id="lang-en">EN</button>
    </div>

    <div class="music-player">
        <audio id="audio-player"></audio>
        <button id="prev-btn">⏮</button>
        <button id="play-pause-btn"></button>
        <button id="next-btn">⏭</button>
        <div id="track-title-container">
            <span id="track-title"></span>
        </div>
    </div>

    <script>
        const info = {
            ru: {
                bio: "Привет! Я — pepp3roni. Обычная шкила. Изучаю python. Живу в РФ, нравится Lil Peep, Серега Пират (-уши), Tame Impala, СТИНТ, MellSher. Смотрю твич — kishki forever.",
                memorial: "Максим Spokoynich — вечная память.",
                contact: "Связаться со мной",
                prompt: "Жми-Жми"
            },
            en: {
                bio: "Hey! I'm pepp3roni. Just a regular school kid learning Python. I'm from Russia and like Lil Peep, Serega Pirat (-ears), Tame Impala, STINT, and MellSher. I watch Twitch — kishki forever.",
                memorial: "Maxim Spokoynich, Rest in Peace.",
                contact: "Contact me",
                prompt: "Tap-Tap"
            },
            discord_link: "https://discord.com/users/1099243706499997768",
            playlist: [
                { title: "LiL PEEP x PIXIES x BONES - WHERE IS MY MIND", src: "./music/wmmlilpeep.mp3" },
                { title: "Серега Пират - КАРТИНЫ", src: "./music/kartini.mp3" }
            ]
        };

        const body = document.body;
        const all_btns = [document.getElementById('contact-btn'), document.getElementById('discord-btn')];
        const bio_text = document.getElementById('bio-text');
        const memorial_line = document.getElementById('memorial-line');
        const tg_btn_text = document.getElementById('contact-btn-text');
        const ds_btn = document.getElementById('discord-btn');
        const ru_btn = document.getElementById('lang-ru');
        const en_btn = document.getElementById('lang-en');
        const player = document.getElementById('audio-player');
        const track_title_container = document.getElementById('track-title-container');
        const track_title = document.getElementById('track-title');
        const prev_btn = document.getElementById('prev-btn');
        const next_btn = document.getElementById('next-btn');
        const play_btn = document.getElementById('play-pause-btn');

        const play_icon = `<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>`;
        const pause_icon = `<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>`;

        let is_hovering = false, warning_timer = null, frenzy_timer = null, frenzy_spawner = null;
        let current_track = 0, is_playing = false, active_frenzy_btn = null;
        const anims = ['frenzy-1','frenzy-2','frenzy-3','frenzy-4'];
        const is_touch = ('ontouchstart' in window) || navigator.maxTouchPoints > 0;

        let lang_lock = false;

        function make_prompt(frenzy=false){
            const pr=document.createElement('div');
            const lang=localStorage.getItem('lang')||'ru';
            pr.className='prompt-text';
            pr.textContent=info[lang].prompt;
            pr.style.animationName=frenzy?anims[Math.floor(Math.random()*4)]:'gentle-burst';
            pr.style.animationDuration=frenzy?'.7s':'2.5s';
            pr.style.left=Math.random()*(innerWidth-150)+'px';
            pr.style.top=Math.random()*(innerHeight-100)+'px';
            body.appendChild(pr);
            setTimeout(()=>pr.remove(), frenzy?700:2500);
        }

        function stop_effects(){
            is_hovering=false;
            clearTimeout(warning_timer); clearTimeout(frenzy_timer); clearInterval(frenzy_spawner);
            body.classList.remove('frenzy-mode','screen-shake');
            all_btns.forEach(b=>b.classList.remove('mobile-active'));
            active_frenzy_btn=null;
            document.querySelectorAll('.btn-glow').forEach(el=>el.remove());
        }

        function start_frenzy(){
            if(is_hovering) return;
            is_hovering=true;
            warning_timer = setTimeout(()=>{
                if(!is_hovering) return;
                function spawn(){if(!is_hovering) return;make_prompt();warning_timer=setTimeout(spawn,1800+Math.random()*1000);}
                spawn();
            },3000);
            frenzy_timer=setTimeout(()=>{
                if(!is_hovering) return;
                clearTimeout(warning_timer);
                const f=document.createElement('div');f.className='blood-flash';body.appendChild(f);
                setTimeout(()=>f.remove(),800);
                body.classList.add('frenzy-mode','screen-shake');
                for(let i=0;i<8;i++) setTimeout(()=>make_prompt(true),Math.random()*500);
                let cnt=2;
                frenzy_spawner=setInterval(()=>{
                    if(!is_hovering){clearInterval(frenzy_spawner);return;}
                    for(let i=0;i<cnt;i++) setTimeout(()=>make_prompt(true),Math.random()*400);
                    cnt++;
                },500);
            },15000);
        }

        function set_lang(lang){
            if(lang_lock) return;
            lang_lock=true;
            const w=document.createElement('div');w.className='lang-wipe';body.appendChild(w);
            setTimeout(()=>{
                bio_text.innerHTML=info[lang].bio;
                memorial_line.innerHTML=info[lang].memorial;
                tg_btn_text.textContent=info[lang].contact;
                localStorage.setItem('lang',lang);
                ru_btn.classList.toggle('active',lang==='ru');
                en_btn.classList.toggle('active',lang==='en');
            },400);
            setTimeout(()=>{w.remove();lang_lock=false;},800);
        }

        function load_track(id){
            player.src=info.playlist[id].src;
            track_title.style.opacity=0;
            setTimeout(()=>{
                track_title.textContent=info.playlist[id].title;
                track_title.classList.remove('scrolling');
                track_title.style.transform='translateX(0)';
                track_title.style.opacity=1;
                setTimeout(()=>{
                    if(track_title.scrollWidth>track_title_container.clientWidth){
                        track_title.classList.add('scrolling');
                    }
                },50);
            },180);
            if(is_playing) player.play();
        }

        function play_pause_toggle(){
            is_playing=!is_playing;
            if(is_playing){player.play();play_btn.innerHTML=pause_icon;}
            else{player.pause();play_btn.innerHTML=play_icon;}
        }

        if(is_touch){
            all_btns.forEach(btn=>{
                btn.addEventListener('click',e=>{
                    e.preventDefault();
                    if(active_frenzy_btn===btn){window.open(btn.href,'_blank');stop_effects();return;}
                    if(active_frenzy_btn) stop_effects();
                    active_frenzy_btn=btn;btn.classList.add('mobile-active');start_frenzy();
                });
            });
            document.addEventListener('click',e=>{
                if(!all_btns.some(b=>b.contains(e.target)) && active_frenzy_btn) stop_effects();
            });
        }else{
            all_btns.forEach(btn=>{
                btn.addEventListener('mouseenter',start_frenzy);
                btn.addEventListener('mouseleave',stop_effects);
                btn.addEventListener('mouseenter',()=>{
                    if(!btn.querySelector('.btn-glow')){
                        const glow=document.createElement('div');
                        glow.className='btn-glow';
                        btn.appendChild(glow);
                    }
                });
                btn.addEventListener('mouseleave',()=>{
                    document.querySelectorAll('.btn-glow').forEach(el=>el.remove());
                });
            });
        }

        document.addEventListener('DOMContentLoaded',()=>{
            const saved=localStorage.getItem('lang')||'ru';
            set_lang(saved);
            ds_btn.href=info.discord_link;
            play_btn.innerHTML=play_icon;
            load_track(current_track);
        });

        ru_btn.addEventListener('click',()=>set_lang('ru'));
        en_btn.addEventListener('click',()=>set_lang('en'));
        play_btn.addEventListener('click',play_pause_toggle);
        next_btn.addEventListener('click',()=>{current_track=(current_track+1)%info.playlist.length;load_track(current_track);});
        prev_btn.addEventListener('click',()=>{current_track=(current_track-1+info.playlist.length)%info.playlist.length;load_track(current_track);});
        player.addEventListener('ended',()=>{current_track=(current_track+1)%info.playlist.length;load_track(current_track);});
    </script>
</body>
</html>
